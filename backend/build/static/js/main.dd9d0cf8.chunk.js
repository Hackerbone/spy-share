(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{337:function(e,t,n){},338:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(117),r=n.n(s),i=n(19),o=n(16),l=n(5),u=n(118),d=n.n(u).a.create({baseURL:"http://localhost:5000",withCredentials:!0}),j=n(1);function h(){var e=Object(l.f)();return Object(j.jsxs)("section",{className:"homepage",children:[Object(j.jsx)("h1",{className:"title",children:"Spy Share"}),Object(j.jsx)("p",{className:"sub-title",children:"Stick and save your notes and access them from anywhere!"}),Object(j.jsx)("button",{className:"primary-btn",onClick:function(){return e.push("/login")},children:"Get Started"})]})}var b=n(8),m=n.n(b);function p(){return Object(j.jsxs)("section",{className:"auth",children:[Object(j.jsx)("h1",{className:"title",children:"Login"}),Object(j.jsx)("p",{className:"sub-title",children:"Log in to your account to access your notes"}),Object(j.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault();var t=e.target.email.value,n=e.target.password.value;if(t&&n){var a={email:t,password:n};d.post("/login",a).then((function(e){"Authentication successful"===e.data?m()(e.data,"Continue to your notes","success").then((function(e){e&&(window.location.href="/notes")})):m()(e.data,"Please check your credentials","warning")})).catch((function(e){console.log(e)}))}else m()("Email or Password cannot be empty","Please fill in the details to Login","warning")}(e)},className:"auth-form",children:[Object(j.jsx)("input",{type:"email",placeholder:"email",name:"email"}),Object(j.jsx)("input",{type:"password",placeholder:"password",name:"password"}),Object(j.jsx)("button",{className:"primary-btn",type:"submit",children:"Submit"})]}),Object(j.jsxs)("p",{className:"sub-title",children:["Don't have an account ?"," ",Object(j.jsx)(o.b,{to:"/register",className:"text-blue",children:"Register here"})," "]})]})}var O=n(6),f=n.n(O),x=n(17);function g(){var e=function(){var e=Object(x.a)(f.a.mark((function e(t){var n,a,c,s,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.name.value,a=t.target.email.value,c=t.target.password.value,s=t.target.password2.value,r={name:n,email:a,password:c,password2:s},e.next=8,d.post("/register",r).then((function(e){"Registration Successful"===e.data?m()(e.data,"Continue to login","success").then((function(e){e&&(window.location.href="/login")})):"User exists"===e.data?m()(e.data,"Try logging in","warning"):m()(e.data,"An error occurred","warning")})).catch((function(e){console.log(e)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("section",{className:"auth",children:[Object(j.jsx)("h1",{className:"title",children:"Register"}),Object(j.jsx)("p",{className:"sub-title",children:"Create an account to start sharing!"}),Object(j.jsxs)("form",{className:"auth-form",onSubmit:function(t){return e(t)},children:[Object(j.jsx)("input",{type:"text",placeholder:"name",name:"name"}),Object(j.jsx)("input",{type:"email",placeholder:"email",name:"email"}),Object(j.jsx)("input",{type:"password",placeholder:"password",name:"password"}),Object(j.jsx)("input",{type:"password",placeholder:"verify password",name:"password2"}),Object(j.jsx)("button",{className:"primary-btn",type:"submit",children:"Submit"})]}),Object(j.jsxs)("p",{className:"sub-title",children:["Already have an account ?"," ",Object(j.jsx)(o.b,{to:"/login",className:"text-blue",children:"Login here"})," "]})]})}var v=n(21),w=n(30),y=n.n(w),N=n(31),k=n.n(N);function S(e){return Object(j.jsx)(j.Fragment,{children:e.data?Object(j.jsxs)("div",{className:"note-card",children:[Object(j.jsxs)("div",{className:"alpha-bg",children:[Object(j.jsx)("h2",{className:"note-heading",children:e.data.title.length?e.data.title:"-"}),Object(j.jsx)("div",{className:"note-description",children:Object(j.jsx)(y.a,{className:"custom-html-style",remarkPlugins:[k.a],children:e.data.description?e.data.description:"Note description comes here"})}),Object(j.jsx)("p",{style:{marginTop:"1rem"},children:Object(j.jsxs)("i",{children:["Created on : ",new Date(Date.parse(e.data.date)).toLocaleDateString()," ",new Date(Date.parse(e.data.date)).toLocaleTimeString()," "]})}),e.data.modifiedDate?Object(j.jsx)("p",{children:Object(j.jsxs)("i",{children:["Last modified : ",new Date(Date.parse(e.data.modifiedDate)).toLocaleDateString()," ",new Date(Date.parse(e.data.modifiedDate)).toLocaleTimeString()," "]})}):Object(j.jsx)(j.Fragment,{})]}),e.data.owner&&e.user.email===e.data.owner?Object(j.jsx)("div",{className:"tag",children:"Owned By you"}):Object(j.jsxs)("div",{className:"tag-shared",children:["Shared By ",e.data.owner]})]}):Object(j.jsx)(j.Fragment,{})})}function D(e){var t=e.props;return Object(j.jsxs)("div",{className:"single-note",children:[Object(j.jsx)("h1",{children:t.title.length?t.title:"Note title comes here"}),Object(j.jsx)(y.a,{className:"custom-html-style",remarkPlugins:[k.a],children:t.description?t.description:"Note description comes here"})]})}n(108);var C=n(45),T=n(44),L=n.n(T),F=new L.a;function E(e){var t=Object(l.f)(),n=Object(a.useRef)(null),c=e.user,s=Object(a.useState)(0),r=Object(i.a)(s,2),o=r[0],u=r[1],h=Object(a.useState)({title:"",description:""}),b=Object(i.a)(h,2),p=b[0],O=b[1],g=Object(a.useState)([]),w=Object(i.a)(g,2),y=w[0],N=w[1],k=function(){var e=Object(x.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,d.post("/create",p).then((function(e){d.get("/getNotes").then((function(e){200===e.status&&(N(e.data),m()("Good going","Your notes are saved!","success").then((function(e){e&&u(!o)})))})).catch((function(e){return console.log("Error",e)}))})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){(function(){var e=Object(x.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.get("/getNotes").then((function(e){200===e.status&&N(e.data)})).catch((function(e){return console.log("Error",e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(j.jsxs)("section",{className:"dashboard",children:[Object(j.jsxs)("div",{className:"headers",children:[Object(j.jsxs)("div",{className:"left",children:[Object(j.jsxs)("h1",{className:"title",children:["Welcome ",c.name]}),Object(j.jsxs)("h3",{className:"sub-title",children:["Your notes : ",y.length]}),Object(j.jsx)("button",{className:"primary-btn m-0",onClick:function(){return u(!o)},children:o?"View All notes":"Create new Note"})]}),Object(j.jsx)("div",{className:"right",children:Object(j.jsx)("button",{className:"primary-btn",onClick:function(e){return function(e){e.preventDefault(),d.get("/logout",p).then((function(e){"Logged out successfully"===e.data&&m()(e.data,"Come back later!","success").then((function(e){e&&(window.location.href="/")}))})).catch((function(e){console.log(e)}))}(e)},children:"Logout"})})]}),o?Object(j.jsxs)("div",{className:"create-note",children:[Object(j.jsxs)("form",{onSubmit:function(e){return k(e)},className:"auth-form",children:[Object(j.jsx)("label",{children:"Title of your Note"}),Object(j.jsx)("input",{type:"text",placeholder:"Title of your note",name:"title",onChange:function(e){O(Object(v.a)(Object(v.a)({},p),{},{title:e.target.value}))}}),Object(j.jsx)("label",{className:"my-1",children:"Description"}),Object(j.jsx)(C.a,{ref:n,style:{height:"600px"},defaultValue:"\n> Here is a template quote\n\n# This is a note heading\n\n**This is a bold text**\n\n![Image placeholder](https://designshack.net/wp-content/uploads/placeholder-image.png)\n\n",className:"editor",placeholder:"start typing here..",onChange:function(e){e.html;var t=e.text;O(Object(v.a)(Object(v.a)({},p),{},{description:t}))},renderHTML:function(e){return F.render(e)}}),p.title.length>0&&p.description.length>0?Object(j.jsx)("button",{className:"primary-btn",type:"submit",children:"Submit"}):Object(j.jsx)("div",{className:"my-1",children:Object(j.jsx)("h2",{children:"To save your note add a title and description"})})]}),Object(j.jsxs)("div",{className:"preview",children:[Object(j.jsx)("h1",{className:"my-1",children:"Note preview"}),Object(j.jsx)(D,{props:p})]})]}):Object(j.jsx)("div",{className:"notes",children:y.length>0?Object(j.jsx)(j.Fragment,{children:y&&y.map((function(e,n){return Object(j.jsx)("div",{className:"note-card-single-container",onClick:function(){t.push("/note/".concat(e._id))},children:Object(j.jsx)(S,{data:e,user:c})},n)}))}):Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("h1",{children:"No Notes yet! Create one by clicking on the Create Note button"})})})]})}var P=new L.a;function B(e){var t=e.user,n=Object(a.useRef)(null),c=Object(a.useState)({}),s=Object(i.a)(c,2),r=s[0],u=s[1],h=Object(a.useState)({}),b=Object(i.a)(h,2),p=b[0],O=b[1],g=Object(a.useState)(0),w=Object(i.a)(g,2),N=w[0],S=w[1],T=Object(a.useState)(""),L=Object(i.a)(T,2),F=L[0],E=L[1],B=Object(l.g)().noteID,Y=function(e){d.get("/getNote/"+B).then((function(e){u(e.data),O(e.data)}))},A=function(){var e=Object(x.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,d.post("/share/"+B,{userEmail:F}).then((function(e){200===e.status&&m()("Your note has been shared ","".concat(F," can now view your note"),"success").then((function(e){e&&(Y(),S(0))}))})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(x.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(n=p).modifiedDate=Date.now(),e.next=5,d.post("/update/"+B,n).then((function(e){200===e.status&&m()("Your note has been modified","Continue to your note","success").then((function(e){e&&(Y(),S(0))}))})).catch((function(e){console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(x.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m()("Are you sure you want to delete this note?","This action cannot be undone","warning").then(function(){var e=Object(x.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,d.get("/delete/"+B).then((function(e){200===e.status&&m()("Your note has been deleted","Continue to your notes","success").then((function(e){e&&(window.location.href="/notes")}))})).catch((function(e){console.log(e)}));case 3:e.next=6;break;case 5:m()("Phew! That was kinda close","Your note remains","success");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(x.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m()("Are you sure you want to delete this note?","This action cannot be undone","warning").then(function(){var e=Object(x.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,d.get("/delete-shared/"+B).then((function(e){200===e.status&&m()("Your note has been removed","Continue to your notes","success").then((function(e){e&&(window.location.href="/notes")}))})).catch((function(e){console.log(e)}));case 3:e.next=6;break;case 5:m()("Phew! That was kinda close","Your note remains","success");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){d.get("/getNote/"+B).then((function(e){u(e.data),O(e.data)}))}),[B]),Object(j.jsxs)("div",{className:"single-note-container",children:[Object(j.jsx)("div",{children:Object(j.jsx)(o.b,{to:"/notes",className:"primary-btn m-0",children:"Back to all notes"})}),0===N?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"note",children:[Object(j.jsx)("h1",{children:r.title}),Object(j.jsx)(y.a,{className:"custom-html-style",remarkPlugins:[k.a],children:r.description?r.description:"This note is not owned by you or does not exist"})]}),r.owner&&t.email===r.owner?Object(j.jsx)("div",{className:"tag",children:"Owned By you"}):Object(j.jsxs)("div",{className:"tag-shared",children:["Shared By ",r.owner]}),r.owner===t.email?Object(j.jsx)(j.Fragment,{children:r.description&&r.title?Object(j.jsxs)("div",{className:"actions",children:[Object(j.jsx)("button",{className:"btn mr-1 my-1",onClick:function(){return S(2)},children:"Share this note"}),Object(j.jsx)("button",{className:"btn mr-1 my-1",onClick:function(){return S(1)},children:"Edit this note"}),Object(j.jsx)("button",{className:"btn mr-1 my-1",onClick:function(){return R()},children:"Delete this note"})]}):Object(j.jsx)(j.Fragment,{})}):Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("button",{className:"btn mr-1 my-1",onClick:function(){return V()},children:"Delete this note"})})]}):1===N?Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"create-note",children:[Object(j.jsx)("button",{className:"btn",onClick:function(){return S(0)},children:"Back to note"}),Object(j.jsxs)("form",{onSubmit:function(e){return I(e)},className:"auth-form",children:[Object(j.jsx)("label",{children:"Title of your Note"}),Object(j.jsx)("input",{type:"text",placeholder:p.title,defaultValue:p.title,name:"title",onChange:function(e){O(Object(v.a)(Object(v.a)({},p),{},{title:e.target.value}))}}),Object(j.jsx)("label",{children:"Description"}),Object(j.jsx)(C.a,{ref:n,style:{height:"600px"},defaultValue:p.description,className:"editor",placeholder:"start typing here..",onChange:function(e){e.html;var t=e.text;O(Object(v.a)(Object(v.a)({},p),{},{description:t}))},renderHTML:function(e){return P.render(e)}}),p.title!==r.title||p.description!==r.description?Object(j.jsx)("button",{className:"primary-btn",type:"submit",children:"Submit"}):Object(j.jsx)("div",{className:"my-1",children:Object(j.jsx)("h2",{children:"Changes need to be done to save a note"})})]}),Object(j.jsx)("div",{className:"preview",children:Object(j.jsx)(D,{props:p})})]})}):Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"create-note",children:Object(j.jsxs)("form",{onSubmit:function(e){return A(e)},className:"auth-form",children:[Object(j.jsx)("label",{children:"Enter the email to which you want to share this note with"}),Object(j.jsx)("input",{type:"text",placeholder:"example@gmail.com",defaultValue:"",name:"email",onChange:function(e){E(e.target.value)}}),Object(j.jsx)("button",{className:"primary-btn",type:"submit",children:"Submit"})]})})})]})}function Y(){return Object(j.jsxs)("section",{className:"homepage",children:[Object(j.jsx)("h1",{className:"error-heading text-blue",children:"404"}),Object(j.jsx)("h1",{children:"Page not found"}),Object(j.jsx)("p",{className:"sub-title my-1",children:"My bad I forgot to make this page. Or did I ?"}),Object(j.jsx)(o.b,{to:"/",className:"primary-btn",children:"Back to home"})]})}n(337);var A=function(){var e=Object(a.useState)({}),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){d.get("/user").then((function(e){c(e.data)}))}),[]),Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(o.a,{children:n?Object(j.jsxs)(l.c,{children:[Object(j.jsx)(l.a,{path:"/notes",exact:!0,children:Object(j.jsx)(E,{user:n})}),Object(j.jsx)(l.a,{path:"/note/:noteID",exact:!0,children:Object(j.jsx)(B,{user:n})}),Object(j.jsx)(l.a,{path:"/",exact:!0,children:Object(j.jsx)(E,{user:n})}),Object(j.jsx)(l.a,{path:"*",children:Object(j.jsx)(Y,{})})]}):Object(j.jsxs)(l.c,{children:[Object(j.jsx)(l.a,{path:"/login",exact:!0,children:Object(j.jsx)(p,{})}),Object(j.jsx)(l.a,{path:"/register",exact:!0,children:Object(j.jsx)(g,{})}),Object(j.jsx)(l.a,{path:"/",exact:!0,children:Object(j.jsx)(h,{})}),Object(j.jsx)(l.a,{path:"*",children:Object(j.jsx)(Y,{})})]})})})};r.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(A,{})}),document.getElementById("root"))}},[[338,1,2]]]);
//# sourceMappingURL=main.dd9d0cf8.chunk.js.map